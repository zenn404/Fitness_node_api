{"version":3,"names":["_tools","require","_react","_interopRequireWildcard","_reactNative","_configureMotion","_Constants","_MotionPressable","_useTransformOrigin","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","TransformKeys","x","y","scale","scaleX","scaleY","skewX","skewY","perspective","rotate","rotateX","rotateY","rotateZ","matrix","OtherNativeKeys","opacity","DefaultValues","DefaultTransition","type","duration","DefaultTransitionTime","Eases","linear","Easing","easeIn","ease","easeInOut","inOut","easeOut","out","circIn","circle","circInOut","circOut","backIn","back","backInOut","backOut","addKeysToSet","objs","Set","obj","keys","u","add","createMotionComponent","Component","MotionComponent","forwardRef","animate","animateProps","initial","initialProps","exit","transition","transformOrigin","style","styleProp","onLayout","onLayoutProp","whileTap","whileHover","onAnimationComplete","rest","ref","refAnims","useRef","animateRecord","animatePropsRecord","initialRecord","initialPropsRecord","whileTapRecord","whileHoverRecord","exitRecord","animKeysSet","values","pressed","hovered","useContext","ContextPressable","animKeys","animValues","map","key","update","anims","current","useNativeDriver","every","isProp","undefined","value","valueInitial","isStr","isString","isArr","isArray","startValue","animValue","Animated","Value","valueInterp","toValue","fromInterp","from","interpolation","interpolate","inputRange","outputRange","transitionForKey","config","timing","isNumber","easing","animOptions","requestAnimationFrame","callback","loop","animation","spring","iterations","start","useMemo","animProps","transforms","entries","forEach","push","transform","useTransformOrigin","createElement","createMotionAnimatedComponent","component","createAnimatedComponent"],"sources":["createMotionComponent.tsx"],"sourcesContent":["import { isArray, isNumber, isString } from '@legendapp/tools';\nimport React, {\n    ComponentProps,\n    ComponentRef,\n    ComponentType,\n    forwardRef,\n    PropsWithoutRef,\n    ReactElement,\n    RefAttributes,\n    useContext,\n    useMemo,\n    useRef,\n} from 'react';\nimport { Animated, Easing, StyleProp, TransformsStyle } from 'react-native';\nimport { config } from './configureMotion';\nimport { DefaultTransitionTime } from './Constants';\nimport type {\n    ComponentStyle,\n    EaseFunction,\n    MotionComponentProps,\n    MotionTransition,\n    MotionTransitionTween,\n    PropsTransforms,\n    UnionToIntersection,\n} from './Interfaces';\nimport { ContextPressable } from './MotionPressable';\nimport { useTransformOrigin } from './useTransformOrigin';\n\ninterface AnimInfo {\n    animValue: Animated.Value;\n    value: any;\n    valueInterp?: number;\n    interpolation?: any;\n}\n\nconst TransformKeys: Record<keyof PropsTransforms, keyof UnionToIntersection<TransformsStyle['transform'][number]>> = {\n    x: 'translateX',\n    y: 'translateY',\n    scale: 'scale',\n    scaleX: 'scaleX',\n    scaleY: 'scaleY',\n    skewX: 'skewX',\n    skewY: 'skewY',\n    perspective: 'perspective',\n    rotate: 'rotate',\n    rotateX: 'rotateX',\n    rotateY: 'rotateY',\n    rotateZ: 'rotateZ',\n    matrix: 'matrix',\n};\n\nconst OtherNativeKeys = {\n    opacity: 'opacity',\n} as const;\n\nconst DefaultValues: Record<keyof PropsTransforms | keyof typeof OtherNativeKeys, any> = {\n    x: 0,\n    y: 0,\n    scale: 1,\n    scaleX: 1,\n    scaleY: 1,\n    skewX: '0deg',\n    skewY: '0deg',\n    perspective: 0,\n    rotate: '0deg',\n    rotateX: '0deg',\n    rotateY: '0deg',\n    rotateZ: '0deg',\n    matrix: [],\n    opacity: 1,\n};\n\nconst DefaultTransition: MotionTransition = { type: 'tween', duration: DefaultTransitionTime };\nconst Eases: Record<EaseFunction, (value: number) => number> = {\n    linear: Easing.linear,\n    easeIn: Easing.ease,\n    easeInOut: Easing.inOut(Easing.ease),\n    easeOut: Easing.out(Easing.ease),\n    circIn: Easing.circle,\n    circInOut: Easing.inOut(Easing.circle),\n    circOut: Easing.out(Easing.circle),\n    backIn: Easing.back(2),\n    backInOut: Easing.inOut(Easing.back(2)),\n    backOut: Easing.out(Easing.back(2)),\n};\n\nfunction addKeysToSet(...objs: Record<string, any>[]) {\n    const set = new Set<string>();\n    for (let i = 0; i < objs.length; i++) {\n        const obj = objs[i];\n        if (obj) {\n            const keys = Object.keys(obj);\n            for (let u = 0; u < keys.length; u++) {\n                set.add(keys[u]);\n            }\n        }\n    }\n    return set;\n}\n\ntype MotionComponentBaseProps<TComponent extends ComponentType<any>, TExtraProps> = ComponentProps<TComponent> &\n    TExtraProps &\n    MotionComponentProps<TComponent, ComponentStyle<TComponent>, any, any, TExtraProps>;\n\ntype MotionComponentWithGenerics<TComponent extends ComponentType<any>, TExtraProps> = PropsWithoutRef<\n    MotionComponentBaseProps<TComponent, TExtraProps>\n> &\n    RefAttributes<ComponentRef<TComponent>> & {\n        <TAnimate = unknown, TAnimateProps = unknown>(\n            props: ComponentProps<TComponent> &\n                TExtraProps &\n                MotionComponentProps<TComponent, ComponentStyle<TComponent>, TAnimate, TAnimateProps, TExtraProps>\n        ): ReactElement | null;\n    };\n\nexport function createMotionComponent<T extends ComponentType<any>, TExtraProps = {}>(\n    Component: Animated.AnimatedComponent<T> | T\n): MotionComponentWithGenerics<T, TExtraProps> {\n    type BaseProps = ComponentProps<T> & TExtraProps;\n    type ForwardProps = BaseProps & MotionComponentProps<T, ComponentStyle<T>, any, any, TExtraProps>;\n\n    const MotionComponent = forwardRef<ComponentRef<T>, ForwardProps>(function MotionComponent(\n        {\n            animate,\n            animateProps,\n            initial,\n            initialProps,\n            exit,\n            transition,\n            transformOrigin,\n            style: styleProp,\n            onLayout: onLayoutProp,\n            whileTap,\n            whileHover,\n            onAnimationComplete,\n            ...rest\n        },\n        ref\n    ) {\n        const refAnims = useRef<Partial<Record<string, AnimInfo>>>({});\n\n        // Generate the arrays of keys and values for transitioning. These are used as deps of useMemo\n        // so that it will update whenever a key or value changes.\n        const animateRecord = animate as Record<string, any> | undefined;\n        const animatePropsRecord = animateProps as Record<string, any> | undefined;\n        const initialRecord = initial as Record<string, any> | undefined;\n        const initialPropsRecord = initialProps as Record<string, any> | undefined;\n        const whileTapRecord = whileTap as Record<string, any> | undefined;\n        const whileHoverRecord = whileHover as Record<string, any> | undefined;\n        const exitRecord = exit as Record<string, any> | undefined;\n\n        const animKeysSet = addKeysToSet(\n            initialRecord || {},\n            animateRecord || {},\n            animatePropsRecord || {},\n            whileTapRecord || {},\n            whileHoverRecord || {},\n            exitRecord || {}\n        );\n        const values: Record<string, any> = Object.assign({}, animateRecord ?? {});\n\n        if (animatePropsRecord) {\n            addKeysToSet(animKeysSet, animatePropsRecord);\n            Object.assign(values, animatePropsRecord);\n        }\n\n        if (whileTap || whileHover) {\n            // eslint-disable-next-line react-hooks/rules-of-hooks\n            const { pressed, hovered } = useContext(ContextPressable);\n\n            if (whileHoverRecord) {\n                addKeysToSet(animKeysSet, whileHoverRecord);\n                if (hovered) {\n                    Object.assign(values, whileHoverRecord);\n                }\n            }\n            if (whileTapRecord) {\n                addKeysToSet(animKeysSet, whileTapRecord);\n                if (pressed) {\n                    Object.assign(values, whileTapRecord);\n                }\n            }\n        }\n\n        if (exitRecord) {\n            addKeysToSet(animKeysSet, exitRecord);\n        }\n\n        const animKeys = [...animKeysSet];\n        const animValues = animKeys.map((key) => values[key]);\n\n        const update = () => {\n            const anims = refAnims.current;\n\n            const useNativeDriver = !animatePropsRecord && animKeys.every((key) => !!OtherNativeKeys[key] || !!TransformKeys[key]);\n\n            for (let i = 0; i < animKeys.length; i++) {\n                const key = animKeys[i];\n                const isProp = animatePropsRecord?.[key] !== undefined;\n                let value = values[key];\n                const valueInitial = (isProp ? initialPropsRecord?.[key] : initialRecord?.[key]) ?? value ?? DefaultValues[key];\n                if (value === undefined) {\n                    value = valueInitial ?? DefaultValues[key];\n                }\n\n                if (!anims[key] || anims[key].value !== value) {\n                    const isStr = isString(valueInitial);\n                    const isArr = isArray(valueInitial);\n\n                    // If this is the first run or it's a new key, create the Animated.Value\n                    if (!anims[key]) {\n                        const startValue = isStr || isArr ? 1 : (valueInitial as number);\n                        const animValue = new Animated.Value(startValue);\n                        anims[key] = {\n                            value: valueInitial,\n                            animValue,\n                            valueInterp: isStr ? 1 : undefined,\n                        };\n                    }\n\n                    let toValue: number;\n                    // If string or array it needs to interpolate, so toggle back and forth between 0 and 1,\n                    // interpolating from current value to target value\n                    if (isStr || isArr) {\n                        const fromInterp = anims[key].valueInterp;\n                        const from = anims[key].value;\n                        anims[key].interpolation = anims[key].animValue.interpolate({\n                            inputRange: [0, 1],\n                            outputRange: fromInterp === 1 ? [value, from] : [from, value],\n                        });\n                        anims[key].valueInterp = toValue = 1 - fromInterp;\n                        anims[key].value = value;\n                    } else {\n                        anims[key].value = toValue = value as number;\n                    }\n\n                    // Get the transition for this key, the 'default' key, the root transition, or default transition if no transition prop\n                    const transitionForKey: MotionTransition = transition?.[key] || transition?.default || transition || DefaultTransition;\n\n                    if (\n                        config.timing === 's' &&\n                        transitionForKey !== DefaultTransition &&\n                        isNumber((transitionForKey as MotionTransitionTween).duration)\n                    ) {\n                        (transitionForKey as MotionTransitionTween).duration *= 1000;\n                    }\n\n                    if (isString((transitionForKey as MotionTransitionTween).easing)) {\n                        (transitionForKey as MotionTransitionTween).easing =\n                            Eases[(transitionForKey as MotionTransitionTween).easing as unknown as EaseFunction];\n                    }\n                    if (isString((transitionForKey as MotionTransitionTween).ease)) {\n                        (transitionForKey as MotionTransitionTween).ease =\n                            Eases[(transitionForKey as MotionTransitionTween).ease as unknown as EaseFunction];\n                    }\n\n                    const animOptions = Object.assign(\n                        {\n                            toValue,\n                            useNativeDriver,\n                        },\n                        transitionForKey\n                    );\n\n                    // This typeof check is to make it work when rendered server-side like in Next.js\n                    if (typeof requestAnimationFrame !== 'undefined') {\n                        requestAnimationFrame(() => {\n                            const callback = onAnimationComplete ? () => onAnimationComplete(key) : undefined;\n                            const { loop, type } = transitionForKey;\n\n                            let animation: Animated.CompositeAnimation;\n\n                            // Spring or timing based on the transition prop\n                            if (type === 'spring') {\n                                animation = Animated.spring(anims[key].animValue, animOptions);\n                            } else {\n                                animation = Animated.timing(anims[key].animValue, animOptions as Animated.TimingAnimationConfig);\n                            }\n\n                            // Loop based on the transition prop\n                            if (loop !== undefined) {\n                                animation = Animated.loop(animation, { iterations: loop });\n                            }\n\n                            animation.start(callback);\n                        });\n                    }\n                }\n            }\n        };\n\n        useMemo(update, animValues); // eslint-disable-line react-hooks/exhaustive-deps\n\n        // Apply the animations to the style object\n        const style: StyleProp<any> = {};\n        const animProps: Record<string, any> = {};\n        const transforms: { key: string; value: AnimInfo }[] = [];\n        Object.entries(refAnims.current).forEach(([key, value]) => {\n            if (animatePropsRecord?.[key] !== undefined) {\n                animProps[key] = value.interpolation || value.animValue;\n            } else if (TransformKeys[key]) {\n                transforms.push({ key, value });\n            } else {\n                style[key] = value.interpolation || value.animValue;\n            }\n        });\n\n        // Map the transforms into an Animated transforms array\n        if (transforms.length) {\n            style.transform = transforms.map(({ key, value }) => ({\n                [TransformKeys[key]]: value.interpolation || value.animValue,\n            }));\n        }\n\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        const onLayout = transformOrigin ? useTransformOrigin(transformOrigin, style.transform, onLayoutProp) : onLayoutProp;\n\n        // @ts-ignore\n        return <Component style={[styleProp, style]} onLayout={onLayout} {...rest} {...animProps} ref={ref} />;\n    });\n\n    return MotionComponent as any;\n}\nexport function createMotionAnimatedComponent<T extends ComponentType<any>>(component: T) {\n    return createMotionComponent(Animated.createAnimatedComponent(component));\n}\n"],"mappings":"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","ignoreList":[]}