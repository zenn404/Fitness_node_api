{"version":3,"names":["isArray","isNumber","isString","React","forwardRef","useContext","useMemo","useRef","Animated","Easing","config","DefaultTransitionTime","ContextPressable","useTransformOrigin","TransformKeys","x","y","scale","scaleX","scaleY","skewX","skewY","perspective","rotate","rotateX","rotateY","rotateZ","matrix","OtherNativeKeys","opacity","DefaultValues","DefaultTransition","type","duration","Eases","linear","easeIn","ease","easeInOut","inOut","easeOut","out","circIn","circle","circInOut","circOut","backIn","back","backInOut","backOut","addKeysToSet","objs","set","Set","i","length","obj","keys","Object","u","add","createMotionComponent","Component","MotionComponent","animate","animateProps","initial","initialProps","exit","transition","transformOrigin","style","styleProp","onLayout","onLayoutProp","whileTap","whileHover","onAnimationComplete","rest","ref","refAnims","animateRecord","animatePropsRecord","initialRecord","initialPropsRecord","whileTapRecord","whileHoverRecord","exitRecord","animKeysSet","values","assign","pressed","hovered","animKeys","animValues","map","key","update","anims","current","useNativeDriver","every","isProp","undefined","value","valueInitial","isStr","isArr","startValue","animValue","Value","valueInterp","toValue","fromInterp","from","interpolation","interpolate","inputRange","outputRange","transitionForKey","default","timing","easing","animOptions","requestAnimationFrame","callback","loop","animation","spring","iterations","start","animProps","transforms","entries","forEach","push","transform","createElement","_extends","createMotionAnimatedComponent","component","createAnimatedComponent"],"sources":["createMotionComponent.tsx"],"sourcesContent":["import { isArray, isNumber, isString } from '@legendapp/tools';\nimport React, {\n    ComponentProps,\n    ComponentRef,\n    ComponentType,\n    forwardRef,\n    PropsWithoutRef,\n    ReactElement,\n    RefAttributes,\n    useContext,\n    useMemo,\n    useRef,\n} from 'react';\nimport { Animated, Easing, StyleProp, TransformsStyle } from 'react-native';\nimport { config } from './configureMotion';\nimport { DefaultTransitionTime } from './Constants';\nimport type {\n    ComponentStyle,\n    EaseFunction,\n    MotionComponentProps,\n    MotionTransition,\n    MotionTransitionTween,\n    PropsTransforms,\n    UnionToIntersection,\n} from './Interfaces';\nimport { ContextPressable } from './MotionPressable';\nimport { useTransformOrigin } from './useTransformOrigin';\n\ninterface AnimInfo {\n    animValue: Animated.Value;\n    value: any;\n    valueInterp?: number;\n    interpolation?: any;\n}\n\nconst TransformKeys: Record<keyof PropsTransforms, keyof UnionToIntersection<TransformsStyle['transform'][number]>> = {\n    x: 'translateX',\n    y: 'translateY',\n    scale: 'scale',\n    scaleX: 'scaleX',\n    scaleY: 'scaleY',\n    skewX: 'skewX',\n    skewY: 'skewY',\n    perspective: 'perspective',\n    rotate: 'rotate',\n    rotateX: 'rotateX',\n    rotateY: 'rotateY',\n    rotateZ: 'rotateZ',\n    matrix: 'matrix',\n};\n\nconst OtherNativeKeys = {\n    opacity: 'opacity',\n} as const;\n\nconst DefaultValues: Record<keyof PropsTransforms | keyof typeof OtherNativeKeys, any> = {\n    x: 0,\n    y: 0,\n    scale: 1,\n    scaleX: 1,\n    scaleY: 1,\n    skewX: '0deg',\n    skewY: '0deg',\n    perspective: 0,\n    rotate: '0deg',\n    rotateX: '0deg',\n    rotateY: '0deg',\n    rotateZ: '0deg',\n    matrix: [],\n    opacity: 1,\n};\n\nconst DefaultTransition: MotionTransition = { type: 'tween', duration: DefaultTransitionTime };\nconst Eases: Record<EaseFunction, (value: number) => number> = {\n    linear: Easing.linear,\n    easeIn: Easing.ease,\n    easeInOut: Easing.inOut(Easing.ease),\n    easeOut: Easing.out(Easing.ease),\n    circIn: Easing.circle,\n    circInOut: Easing.inOut(Easing.circle),\n    circOut: Easing.out(Easing.circle),\n    backIn: Easing.back(2),\n    backInOut: Easing.inOut(Easing.back(2)),\n    backOut: Easing.out(Easing.back(2)),\n};\n\nfunction addKeysToSet(...objs: Record<string, any>[]) {\n    const set = new Set<string>();\n    for (let i = 0; i < objs.length; i++) {\n        const obj = objs[i];\n        if (obj) {\n            const keys = Object.keys(obj);\n            for (let u = 0; u < keys.length; u++) {\n                set.add(keys[u]);\n            }\n        }\n    }\n    return set;\n}\n\ntype MotionComponentBaseProps<TComponent extends ComponentType<any>, TExtraProps> = ComponentProps<TComponent> &\n    TExtraProps &\n    MotionComponentProps<TComponent, ComponentStyle<TComponent>, any, any, TExtraProps>;\n\ntype MotionComponentWithGenerics<TComponent extends ComponentType<any>, TExtraProps> = PropsWithoutRef<\n    MotionComponentBaseProps<TComponent, TExtraProps>\n> &\n    RefAttributes<ComponentRef<TComponent>> & {\n        <TAnimate = unknown, TAnimateProps = unknown>(\n            props: ComponentProps<TComponent> &\n                TExtraProps &\n                MotionComponentProps<TComponent, ComponentStyle<TComponent>, TAnimate, TAnimateProps, TExtraProps>\n        ): ReactElement | null;\n    };\n\nexport function createMotionComponent<T extends ComponentType<any>, TExtraProps = {}>(\n    Component: Animated.AnimatedComponent<T> | T\n): MotionComponentWithGenerics<T, TExtraProps> {\n    type BaseProps = ComponentProps<T> & TExtraProps;\n    type ForwardProps = BaseProps & MotionComponentProps<T, ComponentStyle<T>, any, any, TExtraProps>;\n\n    const MotionComponent = forwardRef<ComponentRef<T>, ForwardProps>(function MotionComponent(\n        {\n            animate,\n            animateProps,\n            initial,\n            initialProps,\n            exit,\n            transition,\n            transformOrigin,\n            style: styleProp,\n            onLayout: onLayoutProp,\n            whileTap,\n            whileHover,\n            onAnimationComplete,\n            ...rest\n        },\n        ref\n    ) {\n        const refAnims = useRef<Partial<Record<string, AnimInfo>>>({});\n\n        // Generate the arrays of keys and values for transitioning. These are used as deps of useMemo\n        // so that it will update whenever a key or value changes.\n        const animateRecord = animate as Record<string, any> | undefined;\n        const animatePropsRecord = animateProps as Record<string, any> | undefined;\n        const initialRecord = initial as Record<string, any> | undefined;\n        const initialPropsRecord = initialProps as Record<string, any> | undefined;\n        const whileTapRecord = whileTap as Record<string, any> | undefined;\n        const whileHoverRecord = whileHover as Record<string, any> | undefined;\n        const exitRecord = exit as Record<string, any> | undefined;\n\n        const animKeysSet = addKeysToSet(\n            initialRecord || {},\n            animateRecord || {},\n            animatePropsRecord || {},\n            whileTapRecord || {},\n            whileHoverRecord || {},\n            exitRecord || {}\n        );\n        const values: Record<string, any> = Object.assign({}, animateRecord ?? {});\n\n        if (animatePropsRecord) {\n            addKeysToSet(animKeysSet, animatePropsRecord);\n            Object.assign(values, animatePropsRecord);\n        }\n\n        if (whileTap || whileHover) {\n            // eslint-disable-next-line react-hooks/rules-of-hooks\n            const { pressed, hovered } = useContext(ContextPressable);\n\n            if (whileHoverRecord) {\n                addKeysToSet(animKeysSet, whileHoverRecord);\n                if (hovered) {\n                    Object.assign(values, whileHoverRecord);\n                }\n            }\n            if (whileTapRecord) {\n                addKeysToSet(animKeysSet, whileTapRecord);\n                if (pressed) {\n                    Object.assign(values, whileTapRecord);\n                }\n            }\n        }\n\n        if (exitRecord) {\n            addKeysToSet(animKeysSet, exitRecord);\n        }\n\n        const animKeys = [...animKeysSet];\n        const animValues = animKeys.map((key) => values[key]);\n\n        const update = () => {\n            const anims = refAnims.current;\n\n            const useNativeDriver = !animatePropsRecord && animKeys.every((key) => !!OtherNativeKeys[key] || !!TransformKeys[key]);\n\n            for (let i = 0; i < animKeys.length; i++) {\n                const key = animKeys[i];\n                const isProp = animatePropsRecord?.[key] !== undefined;\n                let value = values[key];\n                const valueInitial = (isProp ? initialPropsRecord?.[key] : initialRecord?.[key]) ?? value ?? DefaultValues[key];\n                if (value === undefined) {\n                    value = valueInitial ?? DefaultValues[key];\n                }\n\n                if (!anims[key] || anims[key].value !== value) {\n                    const isStr = isString(valueInitial);\n                    const isArr = isArray(valueInitial);\n\n                    // If this is the first run or it's a new key, create the Animated.Value\n                    if (!anims[key]) {\n                        const startValue = isStr || isArr ? 1 : (valueInitial as number);\n                        const animValue = new Animated.Value(startValue);\n                        anims[key] = {\n                            value: valueInitial,\n                            animValue,\n                            valueInterp: isStr ? 1 : undefined,\n                        };\n                    }\n\n                    let toValue: number;\n                    // If string or array it needs to interpolate, so toggle back and forth between 0 and 1,\n                    // interpolating from current value to target value\n                    if (isStr || isArr) {\n                        const fromInterp = anims[key].valueInterp;\n                        const from = anims[key].value;\n                        anims[key].interpolation = anims[key].animValue.interpolate({\n                            inputRange: [0, 1],\n                            outputRange: fromInterp === 1 ? [value, from] : [from, value],\n                        });\n                        anims[key].valueInterp = toValue = 1 - fromInterp;\n                        anims[key].value = value;\n                    } else {\n                        anims[key].value = toValue = value as number;\n                    }\n\n                    // Get the transition for this key, the 'default' key, the root transition, or default transition if no transition prop\n                    const transitionForKey: MotionTransition = transition?.[key] || transition?.default || transition || DefaultTransition;\n\n                    if (\n                        config.timing === 's' &&\n                        transitionForKey !== DefaultTransition &&\n                        isNumber((transitionForKey as MotionTransitionTween).duration)\n                    ) {\n                        (transitionForKey as MotionTransitionTween).duration *= 1000;\n                    }\n\n                    if (isString((transitionForKey as MotionTransitionTween).easing)) {\n                        (transitionForKey as MotionTransitionTween).easing =\n                            Eases[(transitionForKey as MotionTransitionTween).easing as unknown as EaseFunction];\n                    }\n                    if (isString((transitionForKey as MotionTransitionTween).ease)) {\n                        (transitionForKey as MotionTransitionTween).ease =\n                            Eases[(transitionForKey as MotionTransitionTween).ease as unknown as EaseFunction];\n                    }\n\n                    const animOptions = Object.assign(\n                        {\n                            toValue,\n                            useNativeDriver,\n                        },\n                        transitionForKey\n                    );\n\n                    // This typeof check is to make it work when rendered server-side like in Next.js\n                    if (typeof requestAnimationFrame !== 'undefined') {\n                        requestAnimationFrame(() => {\n                            const callback = onAnimationComplete ? () => onAnimationComplete(key) : undefined;\n                            const { loop, type } = transitionForKey;\n\n                            let animation: Animated.CompositeAnimation;\n\n                            // Spring or timing based on the transition prop\n                            if (type === 'spring') {\n                                animation = Animated.spring(anims[key].animValue, animOptions);\n                            } else {\n                                animation = Animated.timing(anims[key].animValue, animOptions as Animated.TimingAnimationConfig);\n                            }\n\n                            // Loop based on the transition prop\n                            if (loop !== undefined) {\n                                animation = Animated.loop(animation, { iterations: loop });\n                            }\n\n                            animation.start(callback);\n                        });\n                    }\n                }\n            }\n        };\n\n        useMemo(update, animValues); // eslint-disable-line react-hooks/exhaustive-deps\n\n        // Apply the animations to the style object\n        const style: StyleProp<any> = {};\n        const animProps: Record<string, any> = {};\n        const transforms: { key: string; value: AnimInfo }[] = [];\n        Object.entries(refAnims.current).forEach(([key, value]) => {\n            if (animatePropsRecord?.[key] !== undefined) {\n                animProps[key] = value.interpolation || value.animValue;\n            } else if (TransformKeys[key]) {\n                transforms.push({ key, value });\n            } else {\n                style[key] = value.interpolation || value.animValue;\n            }\n        });\n\n        // Map the transforms into an Animated transforms array\n        if (transforms.length) {\n            style.transform = transforms.map(({ key, value }) => ({\n                [TransformKeys[key]]: value.interpolation || value.animValue,\n            }));\n        }\n\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        const onLayout = transformOrigin ? useTransformOrigin(transformOrigin, style.transform, onLayoutProp) : onLayoutProp;\n\n        // @ts-ignore\n        return <Component style={[styleProp, style]} onLayout={onLayout} {...rest} {...animProps} ref={ref} />;\n    });\n\n    return MotionComponent as any;\n}\nexport function createMotionAnimatedComponent<T extends ComponentType<any>>(component: T) {\n    return createMotionComponent(Animated.createAnimatedComponent(component));\n}\n"],"mappings":"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","ignoreList":[]}